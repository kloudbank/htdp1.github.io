(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{458:function(a,e,l){a.exports=l.p+"assets/img/keycloakArch.d20aa333.png"},459:function(a,e,l){a.exports=l.p+"assets/img/keyCloakWithK8sApp.9825ac32.png"},526:function(a,e,l){"use strict";l.r(e);var s=l(40),t=Object(s.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"_2조-소과제-keycloak"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2조-소과제-keycloak"}},[a._v("#")]),a._v(" 2조 소과제: Keycloak")]),a._v(" "),s("h2",{attrs:{id:"keycloak"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak"}},[a._v("#")]),a._v(" Keycloak")]),a._v(" "),s("h3",{attrs:{id:"keycloak-이란"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-이란"}},[a._v("#")]),a._v(" Keycloak 이란")]),a._v(" "),s("ul",[s("li",[a._v("Keycloak은 최신 애플리케이션 및 서비스를 대상으로 하는 오픈 소스 ID 및 액세스 관리 솔루션입니다. 코드를 거의 사용하지 않고 애플리케이션과 서비스를 쉽게 보호할 수 있습니다.")]),a._v(" "),s("li",[a._v("KeyCloak은 기본 인증 방식이 OAuth 2.0을 베이스로 한 OIDC")]),a._v(" "),s("li",[a._v("Kubernetes 나 MSA 환경에 최적화 된 솔루션이다.")])]),a._v(" "),s("h3",{attrs:{id:"keycloak-core-concepts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-core-concepts"}},[a._v("#")]),a._v(" Keycloak Core Concepts")]),a._v(" "),s("ul",[s("li",[a._v("Keycloak Core Concepts")])]),a._v(" "),s("p",[s("img",{attrs:{src:l(458),alt:"Keycloak Core Concepts"}})]),a._v(" "),s("p",[a._v("(출처 : https://developers.redhat.com/blog/2019/12/11/keycloak-core-concepts-of-open-source-identity-and-access-management)")]),a._v(" "),s("h3",{attrs:{id:"keycloak-장점"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-장점"}},[a._v("#")]),a._v(" Keycloak 장점")]),a._v(" "),s("ul",[s("li",[a._v("오픈소스로 제공되며 community 버전의 경우 별도의 비용없이 사용 가능")])]),a._v(" "),s("h3",{attrs:{id:"keycloak-기능"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-기능"}},[a._v("#")]),a._v(" Keycloak 기능")]),a._v(" "),s("ul",[s("li",[a._v("User Registration")]),a._v(" "),s("li",[a._v("Social login")]),a._v(" "),s("li",[a._v("Single Sign-On/Sign-Off across all applications")]),a._v(" "),s("li",[a._v("belonging to the same Realm")]),a._v(" "),s("li",[a._v("2-factor authentication")]),a._v(" "),s("li",[a._v("LDAP integration")]),a._v(" "),s("li",[a._v("Kerberos broker")]),a._v(" "),s("li",[a._v("multitenancy with per-realm customizable skin")])]),a._v(" "),s("h3",{attrs:{id:"keycloak-관련-용어"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-관련-용어"}},[a._v("#")]),a._v(" Keycloak 관련 용어")]),a._v(" "),s("ul",[s("li",[a._v("Realm\n"),s("ul",[s("li",[a._v("인증, 인가가 작동하는 범위를 나타내는 단위이다. SSO(Single Sign-On)를 예로 들면 특정 클라이언트들이 SSO를 공유한다면 그 범위는 그 클라이언트들이 공통적으로 속한 Realm에 한정된다. 기본적으로 삭제가 불가능한 Master라는 Realm이 제공된다.")])])]),a._v(" "),s("li",[a._v("Client\n"),s("ul",[s("li",[a._v("JBoss Keycloack에게 인증, 인가 행위를 대행하도록 맡길 애플리케이션을 나타내는 단위이다. 웹사이트일수도 있고, REST API를 제공하는 서비스일수도 있다. 하나의 Realm은 자신에게 종속된 n개의 Client를 생성하고 관리할 수 있다.")])])]),a._v(" "),s("li",[a._v("User\n"),s("ul",[s("li",[a._v("실제 각 Client에 로그인할 사용자를 나타내는 단위이다. 하나의 Realm은 자신에게 종속된 n개의 User를 생성하고 관리할 수 있다. 기본적으로 User 개체는 Username, Email, First Name, Last Name 4개 항목을 가질 수 있는데 Custom User Attributes 기능을 통해 커스텀 항목을 자유롭게 추가할 수 있다.")])])]),a._v(" "),s("li",[a._v("OIDC (OpenID Connect)\n"),s("ul",[s("li",[a._v("OAuth 2.0 프로토콜을 기반으로 상위계층에서 간편하게 인증을 처리하며, 신원확인 서비스(IDP)를 통해 보다 안전한 방식으로 사용자 정보를 제공할 수 있습니다.")])])])]),a._v(" "),s("h2",{attrs:{id:"keycloak-실습"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-실습"}},[a._v("#")]),a._v(" Keycloak 실습")]),a._v(" "),s("ul",[s("li",[a._v("Keycloak, Grafana 설치")]),a._v(" "),s("li",[a._v("Keycloak에 realm, client 추가")]),a._v(" "),s("li",[a._v("Keycloak 설정")]),a._v(" "),s("li",[a._v("연동 설정 후 재배포")]),a._v(" "),s("li",[a._v("Keycloak + Grafana 연동 확인")])]),a._v(" "),s("h3",{attrs:{id:"keycloak-with-k8s-apps"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-with-k8s-apps"}},[a._v("#")]),a._v(" Keycloak with k8s Apps")]),a._v(" "),s("ul",[s("li",[a._v("Keycloak with k8s Apps")])]),a._v(" "),s("p",[s("img",{attrs:{src:l(459),alt:"Keycloak with k8s Apps"}})]),a._v(" "),s("p",[a._v("(출처 : https://www.openshift.com/blog/adding-authentication-to-your-kubernetes-web-applications-with-keycloak)")]),a._v(" "),s("h3",{attrs:{id:"keycloak-grafana-설치"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-grafana-설치"}},[a._v("#")]),a._v(" Keycloak, Grafana 설치")]),a._v(" "),s("ul",[s("li",[a._v("Keycloak, Grafana 설치 및 연동 쉘 파일, yaml 파일 로컬PC에 Clone\n"),s("ul",[s("li",[a._v("yaml 파일 내 AWS 설정으로 Private Repository 상태")]),a._v(" "),s("li",[a._v("해당 Repository에 팀원으로 초대하기 위한 별도 요청 필요")])])])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/Salteed/dp2_keycloak\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("01_install.sh 실행\n"),s("ul",[s("li",[a._v("아래 입력 정보\n"),s("ul",[s("li",[a._v("keycloak 설치할 Namespace")]),a._v(" "),s("li",[a._v("keycloak 관리자 계정")]),a._v(" "),s("li",[a._v("keycloak 관리자 비밀번호")]),a._v(" "),s("li",[a._v("Grafana 설치할 Namespace")])])]),a._v(" "),s("li",[a._v("keycloak, grafana 엔드포인트 확인")])])])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" 01_install.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"keycloak에-realm-client-추가"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak에-realm-client-추가"}},[a._v("#")]),a._v(" Keycloak에 realm, client 추가")]),a._v(" "),s("ul",[s("li",[a._v("02_keycloak_setting.sh 실행\n"),s("ul",[s("li",[a._v("아래 정보 입력\n"),s("ul",[s("li",[a._v("keycloak에 추가할 realm 이름")]),a._v(" "),s("li",[a._v("realm에 추가할 Client ID")])])])])])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" 02_keycloak_setting.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"keycloak-설정"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-설정"}},[a._v("#")]),a._v(" Keycloak 설정")]),a._v(" "),s("ul",[s("li",[a._v("Keycloak 접속 후 Administration Console 클릭")]),a._v(" "),s("li",[a._v("Keycloak 관리자 계정 로그인")]),a._v(" "),s("li",[a._v("좌측 Clients 메뉴 클릭 -> Client ID 클릭")]),a._v(" "),s("li",[a._v("Access Type을 public -> confidential 로 변경 후 저장")]),a._v(" "),s("li",[a._v("Credentials 탭 클릭한 후 Secret 키 복사")]),a._v(" "),s("li",[a._v("좌측 Users 메뉴 클릭 후 Add user 클릭")]),a._v(" "),s("li",[a._v("Username, Email 입력 후 저장")]),a._v(" "),s("li",[a._v("Credentials 탭 클릭한 다음 Password 입력 후 Set Password 클릭")]),a._v(" "),s("li",[a._v("좌측 Clients 메뉴 클릭한 후 Client ID 클릭")]),a._v(" "),s("li",[a._v("Roles 탭 클릭한 후 Add Role 클릭")]),a._v(" "),s("li",[a._v("Role Name 입력 후 저장")]),a._v(" "),s("li",[a._v("좌측 Roles 메뉴 클릭한 후 default-roles-{realm 이름} 클릭\n"),s("ul",[s("li",[a._v("ex) default-roles-realm-50")])])]),a._v(" "),s("li",[a._v("Client Roles 클릭하여 생성한 client 선택\n"),s("ul",[s("li",[a._v("ex) client-50")])])]),a._v(" "),s("li",[a._v("생성된 Role 클릭 후 Add selected 클릭")])]),a._v(" "),s("h3",{attrs:{id:"연동-설정-후-재배포"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#연동-설정-후-재배포"}},[a._v("#")]),a._v(" 연동 설정 후 재배포")]),a._v(" "),s("ul",[s("li",[a._v("04_connect_authorization.sh 파일 keycloak secret 값 수정\n"),s("ul",[s("li",[a._v("ex) i_keycloak_secret")])])]),a._v(" "),s("li",[a._v("스크립트 확인")]),a._v(" "),s("li",[a._v("04_connect_authorization.sh 실행")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sh")]),a._v(" 04_connect_authorization.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"keycloak-grafana-연동-확인"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keycloak-grafana-연동-확인"}},[a._v("#")]),a._v(" Keycloak + Grafana 연동 확인")]),a._v(" "),s("ul",[s("li",[a._v("Grafana 접속")]),a._v(" "),s("li",[a._v("Sign in with Login Keycloak 클릭")]),a._v(" "),s("li",[a._v("Username과 Password 입력")]),a._v(" "),s("li",[a._v("로그인 확인")])])])}),[],!1,null,null,null);e.default=t.exports}}]);