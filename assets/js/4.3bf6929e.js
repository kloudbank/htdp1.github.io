(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{367:function(s,a,t){s.exports=t.p+"assets/img/argocd-flow.1fa6fa3f.png"},368:function(s,a,t){s.exports=t.p+"assets/img/argocd-cli-connect.1f2fe727.png"},369:function(s,a,t){s.exports=t.p+"assets/img/argocd-main.21f19e3a.png"},370:function(s,a,t){s.exports=t.p+"assets/img/argocd-application-create-general.785c92d8.png"},371:function(s,a,t){s.exports=t.p+"assets/img/argocd-application-create-source-destination.1e877edf.png"},372:function(s,a,t){s.exports=t.p+"assets/img/argocd-application-create-kustomize.804de525.png"},373:function(s,a,t){s.exports=t.p+"assets/img/argocd-application-after-creat.87d639d4.png"},374:function(s,a,t){s.exports=t.p+"assets/img/argocd-application-deploy-change.50754889.png"},375:function(s,a,t){s.exports=t.p+"assets/img/argocd-modify-config-asis.a4db8955.png"},376:function(s,a,t){s.exports=t.p+"assets/img/argocd-modify-config-tobe.a4e61172.png"},377:function(s,a,t){s.exports=t.p+"assets/img/argocd-cd-asis.ae8b1ccd.png"},378:function(s,a,t){s.exports=t.p+"assets/img/argocd-multi-cluster-asis.631038fc.png"},379:function(s,a,t){s.exports=t.p+"assets/img/argocd-multi-cluster-tobe.c7b27e12.png"},380:function(s,a,t){s.exports=t.p+"assets/img/argocd-helm-deploy-asis.56df3882.png"},381:function(s,a,t){s.exports=t.p+"assets/img/argocd-helm-deploy-tobe.6bfaa43f.png"},500:function(s,a,t){"use strict";t.r(a);var n=t(40),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"argocd-실습"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#argocd-실습"}},[s._v("#")]),s._v(" ArgoCD 실습")]),s._v(" "),n("p",[n("img",{attrs:{src:t(367),alt:"ArgoCD GitOps CD"}})]),s._v(" "),n("ul",[n("li",[s._v("Jenkins 구성\n"),n("ul",[n("li",[s._v("Jenkins 설치 및 Plugin setting")]),s._v(" "),n("li",[s._v("Pipeline 구성(Github, Docker Hub 연동 등)")])])]),s._v(" "),n("li",[s._v("ArgoCD\n"),n("ul",[n("li",[s._v("ArgoCD 설치")]),s._v(" "),n("li",[s._v("ArgoCD CLI")]),s._v(" "),n("li",[s._v("ArgoCD 설정(Project 및 Application 생성, ArgoCD Image Updater 설정)")])])])]),s._v(" "),n("h2",{attrs:{id:"jenkins-설치"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-설치"}},[s._v("#")]),s._v(" Jenkins 설치")]),s._v(" "),n("ul",[n("li",[s._v("helm repo 추가")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("helm repo "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" jenkins https://charts.jenkins.io\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Jenkins 외부 접속을 위해 Service Type을 LoadBalancer로 변경하고 설치")]),s._v("\nhelm "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("RELEASE_NAME"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" jenkins/jenkins\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("ul",[n("li",[s._v("Jenkins와 gitHub 연동\n"),n("ul",[n("li",[s._v("GitHub에서 Credential 생성: Github Setting > Developer settings 메뉴로 들어간 후에 아래와 같이 Personal access tokens 메뉴로 들어간다. 다음 우측 상단의 Generate new token 메뉴를 선택한다.")]),s._v(" "),n("li",[s._v("Jenkins에서 GitHub 연결 설정: Jenkins > Manage Jenkins > Configure System 메뉴로 들어가면 GitHub 계정을 설정 추가")])])]),s._v(" "),n("li",[s._v("Jenkins와 Docker Hub 연동\n"),n("ul",[n("li",[s._v("Jenkins > Manage Jenkins > Manage Credentials 메뉴에서 Docker hub 연동을 위한 'Username with password' 타입의 Credential을 추가")])])]),s._v(" "),n("li",[s._v("Pipeline 구성\n"),n("ul",[n("li",[s._v("Dockerfile 예시")])]),s._v(" "),n("div",{staticClass:"language-dockerfile line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 베이스 이미지 ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" adoptopenjdk/openjdk11\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# temp 이미지에서 build/libs/*.jar파일을 app.jar로 복사")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" build/libs/kiki.jar app.jar \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 컨테이너 8080 port 노출")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 8080 \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CMD")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"java"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-jar"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/app.jar"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("ul",[n("li",[s._v("Jenkinsfile 예시")])]),s._v(" "),n("div",{staticClass:"language-groovy line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("podTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("label"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker-build'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \ncontainers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("containerTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    image"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'alpine/git'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    command"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cat'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ttyEnabled"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("containerTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    image"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    command"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cat'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    ttyEnabled"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("containerTemplate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gradle'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        image"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gradle:7.1.0-jdk11'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        command"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cat'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        ttyEnabled"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nvolumes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" \n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostPathVolume")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mountPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/var/run/docker.sock'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" hostPath"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/var/run/docker.sock'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker-build'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" dockerHubCred "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"docker_hub_id"')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" appImage\n        \n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Checkout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            git "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                branch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                credentialsId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'heyKim'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://github.com/heyKim/todo.git'")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        \n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Test'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("container")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'gradle'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                script "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    sh "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'chmod 755 ./gradlew'")]),s._v("\n                    sh "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'java -version'")]),s._v("\n                    sh "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'printenv|sort'")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// sh './gradlew test'")]),s._v("\n                    sh "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./gradlew build -x test'")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Build'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("container")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                script "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    appImage "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" docker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"jkk3366/jenkins"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("stage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Push'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("container")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                script "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    docker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("withRegistry")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://registry.hub.docker.com'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dockerHubCred"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                        appImage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"'),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BUILD_NUMBER"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                        appImage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string gstring"}},[s._v('"latest"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("   \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br")])])])]),s._v(" "),n("h2",{attrs:{id:"argocd-설치"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#argocd-설치"}},[s._v("#")]),s._v(" ArgoCD 설치")]),s._v(" "),n("ul",[n("li",[s._v("helm repo 추가")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("helm repo "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" argo https://argoproj.github.io/argo-helm\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("config 수정을 위해서 source 다운로드 및 소스 수정 후 argocd 설치")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source 다운로드")]),s._v("\nhelm fetch argo/argo-cd\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source 수정")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# argocd 서버를 외부에서 접속하기 위해서 Service Type만 ClusterIP에서 LoadBalancer로 변경해줌")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm install 하여 argocd 설치")]),s._v("\nhelm "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"argo cd이름 지정"')]),s._v(" argo/argo-cd\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 설치 시 수정한 values.yaml을 적용하고 싶을 때")]),s._v("\nhelm "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"argo cd이름 지정"')]),s._v(" argo/argo-cd -f ./values.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("ul",[n("li",[s._v("설치 후 패스워드 확인")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# secret 에서 패스워드 확인(id는 admin이 default)")]),s._v("\nkubectl -n argocd get secret argocd-initial-admin-secret -o "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.data.password}"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" base64 -d\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# `argocd-initial-admin-secret`는 password 변경 후에 namespace를 지워야한다고 함.(공홈 피셜)")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h2",{attrs:{id:"argocd-cli"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#argocd-cli"}},[s._v("#")]),s._v(" ArgoCD CLI")]),s._v(" "),n("h3",{attrs:{id:"접속"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#접속"}},[s._v("#")]),s._v(" 접속")]),s._v(" "),n("p",[n("img",{attrs:{src:t(368),alt:"ArgoCD 메인화면"}})]),s._v(" "),n("h2",{attrs:{id:"argocd-설정"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#argocd-설정"}},[s._v("#")]),s._v(" ArgoCD 설정")]),s._v(" "),n("h3",{attrs:{id:"둘러보기"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#둘러보기"}},[s._v("#")]),s._v(" 둘러보기")]),s._v(" "),n("p",[n("img",{attrs:{src:t(369),alt:"ArgoCD 메인화면"}}),n("br"),s._v("\nArgoCD는 "),n("code",[s._v("Application")]),s._v("라는 CRD(Custom Resource Definition)를 제공한다. Application은 Kubernetes resources 묶음으로 배포를 책임진다.")]),s._v(" "),n("h3",{attrs:{id:"application-생성"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#application-생성"}},[s._v("#")]),s._v(" Application 생성")]),s._v(" "),n("p",[n("img",{attrs:{src:t(370),alt:"ArgoCD App생성1"}}),n("br"),s._v(" "),n("img",{attrs:{src:t(371),alt:"ArgoCD App생성2"}}),n("br"),s._v(" "),n("img",{attrs:{src:t(372),alt:"ArgoCD App생성3"}})]),s._v(" "),n("ul",[n("li",[s._v("Application Name: App의 이름을 적는다.")]),s._v(" "),n("li",[s._v("Project: 프로젝트를 선택하는 필드. 쿠버네티스의 namespace와 비슷한 개념으로 여러 App을 논리적인 project로 구분하여 관리할 수 있다.")]),s._v(" "),n("li",[s._v("Sync Policy: Git 저장소의 변경 사항을 어떻게 sync할지 결정. Auto는 자동으로 Git 저장소의 변경사항을 운영에 반영하고 Manual은 사용자가 버튼 클릭 혹은 API를 통해 직접 운영 반영을 해야함.")]),s._v(" "),n("li",[s._v("Repository URL: ArgoCD가 바라볼 Git 저장소를 의미")]),s._v(" "),n("li",[s._v("Revision: Git의 어떤 revision (HEAD, master branch 등)을 바라 볼지 결정")]),s._v(" "),n("li",[s._v("Path: Git 저장소에서 어떤 디렉토리를 바라 볼지 결정함. (dot(.)인 경우 root path를, 디렉토리 이름을 적으면 해당 디렉토리의 배포 정의서만 tracking 함)")]),s._v(" "),n("li",[s._v("Cluster: 쿠버네티스의 어느 클러스터에 배포할지를 결정")]),s._v(" "),n("li",[s._v("Namespace: 쿠버네티스 클러스터의 어느 네임스페이스에 배포할지를 결정")]),s._v(" "),n("li",[s._v("Kubernetes manifests Tool 선택: Kubernetes manifest를 정의할 tool 을 선택하고 설정 정보를 입력한다.")])]),s._v(" "),n("p",[n("img",{attrs:{src:t(373),alt:"ArgoCD App생성4"}}),n("br"),s._v("\nArgoCD Application 생성 후, 동기화 이전이라 "),n("code",[s._v("OutOfSync")]),s._v("상태")]),s._v(" "),n("p",[n("img",{attrs:{src:t(374),alt:"ArgoCD App생성5"}}),n("br"),s._v("\nconfig repo에서 Deployment의 namespace을 변경하니 이를 감지하여 동기화가 필요한 상태임을 표시해줌")]),s._v(" "),n("h3",{attrs:{id:"argocd-image-updater"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#argocd-image-updater"}},[s._v("#")]),s._v(" ArgoCD Image Updater")]),s._v(" "),n("ul",[n("li",[s._v("Argo CD로 관리되는 k8s workload의 container image를 자동으로 업데이트 해주는 기능.")]),s._v(" "),n("li",[s._v("resouce yaml에 image 버전 등을 일일이 업데이트 할 필요없이 새로운 이미지의 업데이트를 자동으로 감지하여 k8s 워크로드에 적용해준다.")]),s._v(" "),n("li",[s._v("Argo CD가 관리하는 Application 리소스에 annotation을 부여하여 설정한다.")])]),s._v(" "),n("blockquote",[n("p",[n("strong",[n("em",[s._v("NOTE:")])]),s._v("  아직 개발 중인 기능이다.")])]),s._v(" "),n("h4",{attrs:{id:"argocd-image-updater-설정"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#argocd-image-updater-설정"}},[s._v("#")]),s._v(" ArgoCD Image Updater 설정")]),s._v(" "),n("ol",[n("li",[s._v("argocd-image-updater 설치")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# argocd 가 설치된 k8s workload에 설치")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/argoproj-labs/argocd-image-updater/blob/master/manifests/install.yaml\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Apply the installation manifests¶")]),s._v("\nkubectl apply -n argocd -f manifests/install.yaml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("Docker Registry에 대한 Access 권한 부여")]),s._v(" "),n("li",[s._v("ArgoCD Application에 annotation 추가"),n("br"),s._v("\nAuto Image Updater 설정을 하기 위해서는 annoatation을 추가 해주어야한다."),n("br"),s._v("\n아래 command 로 annoation 추가해도 되고")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("kubectl annotate app argocd-updater-test -n argocd"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    argocd-image-updater.argoproj.io/image-list"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("registry-1.docker.io/jkk3366/jenkins "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    argocd-image-updater.argoproj.io/todo.force-update"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    argocd-image-updater.argoproj.io/write-back-method"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("git\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("ArgoCD UI에서 아래 annoation을 추가해주어도 된다.")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("argocd-image-updater.argoproj.io/image-list: jkk3366/jenkins\nargocd-image-updater.argoproj.io/todo.force-update: "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\nargocd-image-updater.argoproj.io/write-back-method: "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"argocd를-통한-hcp-ci-cd-개선"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#argocd를-통한-hcp-ci-cd-개선"}},[s._v("#")]),s._v(" ArgoCD를 통한 HCP CI/CD 개선")]),s._v(" "),n("ol",[n("li",[s._v("간편한 Config 수정")])]),s._v(" "),n("ul",[n("li",[s._v("As-Is"),n("br"),s._v(" "),n("img",{attrs:{src:t(375),alt:""}}),n("br"),s._v("\n설정 정보가 Docker Image 안에 포함되어 있어 properties가 정적으로 관리됨."),n("br"),s._v("\nconfig가 application 소스와 분리되어 있지 않아 config 수정을 위해 빌드 과정을 거쳐야함.")]),s._v(" "),n("li",[s._v("To-Be"),n("br"),s._v(" "),n("img",{attrs:{src:t(376),alt:""}}),n("br"),s._v("\nCI/CD를 분리하고, properties를 ConfigMap으로 생성하는 kustomize 기능을 활용하여 동적으로 관리.\n"),n("ul",[n("li",[s._v("ConfigMap repository 예시.")])]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("├── kustomization.yaml\n└── prd\n    ├── backend001\n    │   ├── application-api.yml\n    │   ├── application-db.yml\n    │   └── application.yml\n    ├── backend002\n    │   ├── application-api.yml\n    │   ├── application-db.yml\n    │   └── application.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("ul",[n("li",[s._v("Kustomization configMapGenerator 구성 예시")])]),s._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kustomize.config.k8s.io/v1beta1\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Kustomization\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("configMapGenerator")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" account\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("files")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./prd/backend001/application.yml\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./prd/backend001/application"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("api.yml\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./prd/backend001/application"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("db.yml\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apigateway\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("files")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./prd/backend002/application.yml\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./prd/backend002/application"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("api.yml\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./prd/backend002/application"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("db.yml\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])])])]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("빌드없는 배포(CD) 가능")])]),s._v(" "),n("ul",[n("li",[s._v("As-Is"),n("br"),s._v(" "),n("img",{attrs:{src:t(377),alt:"argocd-cd-asis"}}),n("br"),s._v("\n현재 모니터링 구축 시, filebeat, metricbeat, prometheus, elasticsearch 등을 "),n("code",[s._v("kubectl apply -f")]),s._v(" or "),n("code",[s._v("helm install")]),s._v(" 명령어를 통해 수동으로 설치하여 변경 관리와 버전 관리가 부재하고 Human error 발생이 쉬움")]),s._v(" "),n("li",[s._v("To-Be"),n("br"),s._v("\ngit repo에 정의한 상태와 클러스터가 동일하게 유지되어 관리가 용이함.")])]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("Multi Cluster 관리 용이")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("As-Is"),n("br"),s._v(" "),n("img",{attrs:{src:t(378),alt:""}}),n("br"),s._v("\n수백개의 클러스터에 metricbeat를 설치하려면 수동으로 수백번 설치해줘야하여 비효율적임")])]),s._v(" "),n("li",[n("p",[s._v("To-Be"),n("br"),s._v(" "),n("img",{attrs:{src:t(379),alt:""}}),n("br"),s._v("\nargocd를 사용하면 새로운 클러스터가 추가되더라도 간단하게 클러스터 설정만 추가해주면 별도의 처리 없이 멀티 클러스터에 동일한 형상을 유지할 수 있음.")])])]),s._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[s._v("Helm Chart Repo 없이 helm 배포")])]),s._v(" "),n("ul",[n("li",[s._v("As-Is"),n("br"),s._v(" "),n("img",{attrs:{src:t(380),alt:""}}),n("br"),s._v("\nICP Helm Chart Repo를 사용 중으로 ICP가 아닌 Native K8S Cluster에 helm 배포를 위한 대체 방안이 필요함.")]),s._v(" "),n("li",[s._v("To-Be"),n("br"),s._v(" "),n("img",{attrs:{src:t(381),alt:""}}),n("br"),s._v("\nArgoCD 기반 helm 배포를 통해 helm chart repo를 별도로 두지 않고 사용가능함.")])])])}),[],!1,null,null,null);a.default=e.exports}}]);